package bson

import com.alibaba.fastjson.serializer.SerializerFeature
import com.mongodb.DBObject

import scala.util.parsing.json.JSONObject

/**
  * Created by btw on 2017/3/29.
  *
  * 通过export倒出mongo数据的json其实还不是真正的json里面有一些mongo特有的格式需要转换
  *
  * 通过以下方式可以把mongo版本的json转换成通用的json
  *
  */

object MongoJsonToJson extends App {
  val monggoJson = "{\"_id\":\"30003557#CreditCardBasicInfoWrapper#20170427#1493295655483\",\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfoWrapper\",\"errorCode\":\"00000\",\"result\":[{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2017-04-12 00:00:00\",\"paymentDueDate\":\"2017-05-01 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.58,\"statementBalanceRmb\":24991.62,\"availablePoints\":330024.0,\"previousPoints\":270024.0,\"newPoints\":60000.0,\"adjustedPoints\":0.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:03.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:03.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2017-04-12_12_00062265****6889798\",\"tId\":\"c433c323-60d3-4076-ac7f-eeea3bab6ecf\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-04-15T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"625998******6451\",\"statementCycle\":\"2016-12-07 00:00:00\",\"paymentDueDate\":\"2017-01-01 00:00:00\",\"creditLimitRmb\":20000.0,\"minPaymentRmb\":-1999.88,\"statementBalanceRmb\":-19998.83,\"newChargesRmb\":19999.0,\"availablePoints\":25382.0,\"newPoints\":19999.0,\"adjustedPoints\":0.0,\"sex\":\"\",\"insertTime\":ISODate(\"2017-04-27T12:20:03.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:03.000+0000\"),\"flag\":\"0\",\"bank\":\"农业银行\",\"bankName\":\"农业银行\",\"dfid\":\"2016-12-07_09_625998******6451\",\"tId\":\"b7364778-db69-48b4-9ec6-1e68a42d4db4\",\"original\":\"1\",\"receiverDate\":ISODate(\"2016-12-12T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2017-02-12 00:00:00\",\"paymentDueDate\":\"2017-03-03 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.58,\"statementBalanceRmb\":24991.62,\"availablePoints\":228959.0,\"previousPoints\":100959.0,\"newPoints\":25001.0,\"adjustedPoints\":102999.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:04.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:04.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2017-02-12_12_00062265****6889798\",\"tId\":\"56ea7538-2700-449d-93b7-7dfc0aa1ec10\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-02-14T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"625998******6451\",\"statementCycle\":\"2017-03-07 00:00:00\",\"paymentDueDate\":\"2017-04-01 00:00:00\",\"creditLimitRmb\":20000.0,\"minPaymentRmb\":-1991.55,\"statementBalanceRmb\":-19915.54,\"newChargesRmb\":20001.0,\"availablePoints\":78873.0,\"newPoints\":19846.0,\"adjustedPoints\":0.0,\"sex\":\"\",\"insertTime\":ISODate(\"2017-04-27T12:20:09.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:09.000+0000\"),\"flag\":\"0\",\"bank\":\"农业银行\",\"bankName\":\"农业银行\",\"dfid\":\"2017-03-07_09_625998******6451\",\"tId\":\"7a44eccf-95db-4b30-bfc2-f3a5c87c0d9a\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-03-10T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2016-12-12 00:00:00\",\"paymentDueDate\":\"2016-12-31 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.48,\"statementBalanceRmb\":24989.62,\"availablePoints\":94487.0,\"previousPoints\":69497.0,\"newPoints\":24990.0,\"adjustedPoints\":0.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:09.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:09.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2016-12-12_12_00062265****6889798\",\"tId\":\"cefbca65-4f84-4bf6-a32a-70861a877eb7\",\"original\":\"1\",\"receiverDate\":ISODate(\"2016-12-14T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2017-03-12 00:00:00\",\"paymentDueDate\":\"2017-03-31 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.58,\"statementBalanceRmb\":24991.62,\"availablePoints\":270024.0,\"previousPoints\":228959.0,\"newPoints\":41065.0,\"adjustedPoints\":0.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:13.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:13.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2017-03-12_12_00062265****6889798\",\"tId\":\"89569ea4-f3ac-48a9-8782-06e6936afd0b\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-03-14T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"625998******6451\",\"statementCycle\":\"2017-01-07 00:00:00\",\"paymentDueDate\":\"2017-02-01 00:00:00\",\"creditLimitRmb\":20000.0,\"minPaymentRmb\":-1999.78,\"statementBalanceRmb\":-19997.83,\"newChargesRmb\":19999.0,\"availablePoints\":45381.0,\"newPoints\":19999.0,\"adjustedPoints\":0.0,\"sex\":\"\",\"insertTime\":ISODate(\"2017-04-27T12:20:16.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:16.000+0000\"),\"flag\":\"0\",\"bank\":\"农业银行\",\"bankName\":\"农业银行\",\"dfid\":\"2017-01-07_09_625998******6451\",\"tId\":\"d442c5bf-f66c-40c9-b4b0-7dc492440181\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-01-12T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"625998******6451\",\"statementCycle\":\"2017-04-07 00:00:00\",\"paymentDueDate\":\"2017-05-02 00:00:00\",\"creditLimitRmb\":20000.0,\"minPaymentRmb\":-1991.75,\"statementBalanceRmb\":-19917.54,\"newChargesRmb\":25002.0,\"availablePoints\":102730.0,\"newPoints\":23857.0,\"adjustedPoints\":0.0,\"sex\":\"\",\"insertTime\":ISODate(\"2017-04-27T12:20:18.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:18.000+0000\"),\"flag\":\"0\",\"bank\":\"农业银行\",\"bankName\":\"农业银行\",\"dfid\":\"2017-04-07_09_625998******6451\",\"tId\":\"677f8629-7f7e-4011-ae8c-d9f9746122b4\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-04-10T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2017-01-12 00:00:00\",\"paymentDueDate\":\"2017-01-31 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.53,\"statementBalanceRmb\":24990.62,\"availablePoints\":100959.0,\"previousPoints\":94487.0,\"newPoints\":6472.0,\"adjustedPoints\":0.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:18.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:18.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2017-01-12_12_00062265****6889798\",\"tId\":\"4e9a9b92-6551-410a-a282-89a95105c846\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-01-14T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"625998******6451\",\"statementCycle\":\"2017-02-07 00:00:00\",\"paymentDueDate\":\"2017-03-04 00:00:00\",\"creditLimitRmb\":20000.0,\"minPaymentRmb\":-1991.45,\"statementBalanceRmb\":-19914.54,\"newChargesRmb\":20466.71,\"availablePoints\":59027.0,\"newPoints\":13646.0,\"adjustedPoints\":0.0,\"sex\":\"\",\"insertTime\":ISODate(\"2017-04-27T12:20:23.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:23.000+0000\"),\"flag\":\"0\",\"bank\":\"农业银行\",\"bankName\":\"农业银行\",\"dfid\":\"2017-02-07_09_625998******6451\",\"tId\":\"e74dd3de-a031-4a4b-a843-eaa05550d37c\",\"original\":\"1\",\"receiverDate\":ISODate(\"2017-02-10T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"},{\"idNum\":\"131081198303201630\",\"registerId\":0,\"applyNo\":\"106201704270024467\",\"email\":\"34292004@qq.com\",\"userName\":\"董兵兵\",\"creditCardNumber\":\"00062265****6889798\",\"statementCycle\":\"2016-11-12 00:00:00\",\"paymentDueDate\":\"2016-12-01 00:00:00\",\"creditLimitRmb\":25000.0,\"minPaymentRmb\":1249.98,\"statementBalanceRmb\":24999.62,\"availablePoints\":69497.0,\"previousPoints\":44497.0,\"newPoints\":25000.0,\"adjustedPoints\":0.0,\"redeemedPoints\":0.0,\"sex\":\"男\",\"insertTime\":ISODate(\"2017-04-27T12:20:23.000+0000\"),\"updateTime\":ISODate(\"2017-04-27T12:20:23.000+0000\"),\"flag\":\"0\",\"bank\":\"光大银行\",\"bankName\":\"光大银行\",\"dfid\":\"2016-11-12_12_00062265****6889798\",\"tId\":\"3be47b93-daaa-4cb8-87d1-4f3f6ca72bd9\",\"original\":\"1\",\"receiverDate\":ISODate(\"2016-11-14T16:00:00.000+0000\"),\"isMailBlack\":0,\"isMailGray\":0,\"isMailNegative\":0,\"isWhiteMail\":0,\"_class\":\"com.puhui.holmes.index.calc.input.creditcard.CreditCardBasicInfo\"}],\"idNo\":\"131081198303201630\",\"channelCode\":\"qianzhan\",\"requestId\":\"106201704270024467\",\"applyId\":\"24467\",\"userId\":\"30003557\",\"ct\":ISODate(\"2017-04-27T12:20:55.482+0000\"),\"bt\":ISODate(\"2017-04-27T12:20:03.000+0000\")}"











  val dbo = com.mongodb.BasicDBObject.parse(monggoJson)
  println(dbo)
  val json = new com.alibaba.fastjson.JSONObject(dbo)
  json.put("_id",dbo.getString("_id"))
  println(json)
}
